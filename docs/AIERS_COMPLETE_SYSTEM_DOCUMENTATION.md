# AIERS - AI Error Resolution System
## Complete System Documentation for All Agents

**Version**: 2.0  
**Last Updated**: 2025-07-12  
**Status**: CRITICAL SYSTEM - MANDATORY READING  
**Author**: tradingagent  

---

## 🚨 CRITICAL AGENT INSTRUCTIONS

**BEFORE TOUCHING ANY BUILD ERRORS:**
1. **READ THIS ENTIRE DOCUMENT**
2. **ENSURE AIERS IS RUNNING**
3. **NEVER MANUALLY ANALYZE ERROR CODES**
4. **ONLY WORK WITH BOOKLETS GENERATED BY AIERS**

**VIOLATION OF THESE RULES WILL BREAK THE ENTIRE ERROR RESOLUTION WORKFLOW!**

---

## 📋 TABLE OF CONTENTS

1. [System Overview](#system-overview)
2. [Architecture & Components](#architecture--components)
3. [Configuration Guide](#configuration-guide)
4. [Operating Procedures](#operating-procedures)
5. [Agent Workflow](#agent-workflow)
6. [Monitoring & Troubleshooting](#monitoring--troubleshooting)
7. [File Structure Reference](#file-structure-reference)
8. [Recovery Procedures](#recovery-procedures)

---

## 🏗️ SYSTEM OVERVIEW

### What is AIERS?

AIERS (AI Error Resolution System) is an autonomous system that:
- **Watches for build output files** with compilation errors
- **Automatically processes errors** through multiple AI models
- **Generates research booklets** with root cause analysis and solutions
- **Provides systematic error resolution** without manual intervention

### Key Principles

1. **🤖 AUTONOMOUS**: Runs continuously, requires no manual intervention
2. **🔄 SYSTEMATIC**: Processes all errors through consistent AI pipeline
3. **📚 KNOWLEDGE-BASED**: Generates persistent research booklets
4. **🚫 NO MANUAL ANALYSIS**: Agents NEVER touch error codes directly

### AI Model Pipeline

AIERS uses a 4-model pipeline for comprehensive analysis:

1. **Mistral (7b-instruct-q4_K_M)**: Microsoft documentation research
2. **DeepSeek-Coder (6.7b)**: Code context analysis and C# expertise  
3. **CodeGemma (7b-instruct)**: Pattern validation and architectural review
4. **Gemma2**: Final booklet generation and synthesis

---

## 🏛️ ARCHITECTURE & COMPONENTS

### System Architecture

```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   Build Output  │───▶│      AIERS       │───▶│   Research      │
│   (Timestamped) │    │   Autonomous     │    │   Booklets      │
│                 │    │   Processor      │    │                 │
└─────────────────┘    └──────────────────┘    └─────────────────┘
                               │
                               ▼
                       ┌──────────────────┐
                       │   AI Pipeline    │
                       │ • Mistral        │
                       │ • DeepSeek       │
                       │ • CodeGemma      │
                       │ • Gemma2         │
                       └──────────────────┘
```

### Core Components

#### 1. **C# BookletBuilder System** (Primary)
- **Location**: `/MarketAnalyzer/DevTools/BuildTools/src/`
- **Purpose**: Main AIERS implementation with full AI pipeline
- **Status**: ✅ ACTIVE (Restored after deletion incident)
- **Command**: `dotnet run -- <build_output_file>`

#### 2. **Python Autonomous Researcher** (Backup)
- **Location**: `/MarketAnalyzer/archive/python_tools_deprecated_2025-07-11/`
- **Purpose**: Backup system with Ollama integration
- **Status**: ⚠️ DEPRECATED but functional
- **Command**: `python3 autonomous_error_researcher.py`

#### 3. **Configuration System**
- **Main Config**: `/AI_Codebase_Watchdog_System/config/watchdog.ini`
- **Project Config**: `/AI_Codebase_Watchdog_System/config/projects/MarketAnalyzer.ini`
- **Purpose**: Controls all AIERS behavior and paths

#### 4. **Monitoring Tools**
- **Script**: `/MarketAnalyzer/tools/monitor_booklet_generation.sh`
- **Log Files**: Various locations for real-time monitoring
- **Purpose**: Track AIERS health and processing status

---

## ⚙️ CONFIGURATION GUIDE

### Primary Configuration File

**File**: `/AI_Codebase_Watchdog_System/config/watchdog.ini`

#### Critical Settings:

```ini
[AI]
EnableAIAnalysis=true
EnableBookletGeneration=true
BookletOutputDirectory=/mnt/d/Projects/CSharp/Day_Trading_Platform_Dragon/MarketAnalyzer/docs/error-booklets
BuildOutputWatchDirectory=/mnt/d/Projects/CSharp/Day_Trading_Platform_Dragon/AI_Codebase_Watchdog_System/input

[Monitoring]
EnableGlobalMonitoring=true
GlobalNotificationFilePath=./logs/global-notifications.log

[System]
LogLevel=Information
MaxSimultaneousProjects=5
```

#### Key Directory Paths:

- **Input Watch Directory**: `/AI_Codebase_Watchdog_System/input/`
- **Booklet Output Directory**: `/MarketAnalyzer/docs/error-booklets/YYYY-MM-DD/`
- **Log Directory**: `/AI_Codebase_Watchdog_System/logs/`
- **Database**: `/AI_Codebase_Watchdog_System/data/watchdog.db`

### Project-Specific Configuration

**File**: `/AI_Codebase_Watchdog_System/config/projects/MarketAnalyzer.ini`

#### Critical Settings:

```ini
[Project]
ProjectName=MarketAnalyzer
ProjectRootDirectory=/mnt/d/Projects/CSharp/Day_Trading_Platform_Dragon/MarketAnalyzer
BuildCommand=dotnet build

[Analysis]
EnableFinancialValidation=true
EnableArchitecturalCompliance=true
FinancialPrecisionEnforcement=strict
ArchitecturalPatternEnforcement=canonical
```

---

## 🔧 OPERATING PROCEDURES

### Starting AIERS

#### Method 1: C# BookletBuilder (Recommended)
```bash
cd /mnt/d/Projects/CSharp/Day_Trading_Platform_Dragon/MarketAnalyzer/DevTools/BuildTools/src
# Check if built
dotnet build
# Start autonomous watcher (runs continuously)
nohup dotnet run &
```

#### Method 2: Python Backup System
```bash
cd /mnt/d/Projects/CSharp/Day_Trading_Platform_Dragon/MarketAnalyzer/archive/python_tools_deprecated_2025-07-11
# Start autonomous watcher
nohup python3 autonomous_error_researcher.py > aiers_watcher.log 2>&1 &
```

### Checking AIERS Status

#### Process Monitoring:
```bash
# Check if AIERS is running
ps aux | grep -E "(autonomous_error_researcher|MarketAnalyzer.BuildTools|dotnet.*BuildTools)" | grep -v grep

# Expected output should show running processes
```

#### Booklet Generation Check:
```bash
# Check recent booklets
ls -la /mnt/d/Projects/CSharp/Day_Trading_Platform_Dragon/MarketAnalyzer/docs/error-booklets/$(date +%Y-%m-%d)/

# Count booklets generated today
ls /mnt/d/Projects/CSharp/Day_Trading_Platform_Dragon/MarketAnalyzer/docs/error-booklets/$(date +%Y-%m-%d)/*.md 2>/dev/null | wc -l
```

### Submitting Build Errors to AIERS

#### Step 1: Capture Build Output
```bash
# Run build and capture output with timestamp
cd /your/project/directory
dotnet build 2>&1 | tee "build_errors_$(date +%Y%m%d_%H%M%S).txt"
```

#### Step 2: Place in Watched Directory
```bash
# Move file to AIERS input directory
mv "build_errors_$(date +%Y%m%d_%H%M%S).txt" /mnt/d/Projects/CSharp/Day_Trading_Platform_Dragon/AI_Codebase_Watchdog_System/input/
```

#### Step 3: Monitor Processing
AIERS will automatically:
1. Detect the new file
2. Parse all error codes
3. Process through AI pipeline
4. Generate booklets in output directory

---

## 👤 AGENT WORKFLOW

### Mandatory Agent Process

#### 1. **BEFORE ANY ERROR WORK**
```bash
# Check AIERS is running
ps aux | grep autonomous_error_researcher

# If not running, start it:
cd /path/to/python/tools && nohup python3 autonomous_error_researcher.py &
```

#### 2. **NEVER MANUALLY ANALYZE ERRORS**
- ❌ **DO NOT** read error codes from build output
- ❌ **DO NOT** attempt to fix errors directly
- ❌ **DO NOT** analyze compiler messages manually
- ✅ **ONLY** work with booklets generated by AIERS

#### 3. **SUBMIT ERRORS TO AIERS**
```bash
# Capture build errors
dotnet build 2>&1 | tee "errors_$(date +%Y%m%d_%H%M%S).txt"

# Submit to AIERS
mv "errors_$(date +%Y%m%d_%H%M%S).txt" /mnt/d/Projects/CSharp/Day_Trading_Platform_Dragon/AI_Codebase_Watchdog_System/input/
```

#### 4. **WAIT FOR BOOKLETS**
```bash
# Monitor booklet generation
watch 'ls -la /mnt/d/Projects/CSharp/Day_Trading_Platform_Dragon/MarketAnalyzer/docs/error-booklets/$(date +%Y-%m-%d)/'
```

#### 5. **READ AND ACTION BOOKLETS**
- Read the generated booklets in order of priority
- Follow the AI-recommended solutions
- Apply fixes based on booklet guidance
- Document actions in agent journals

### Typical Booklet Structure

```markdown
# Research Booklet: CS0117

**Generated**: 2025-07-12 14:30:22 UTC
**Status**: AwaitingArchitectReview
**Error Batch**: abc123-def456

## Executive Summary
[AI-generated summary of the issue]

## Compiler Errors Analyzed
[Detailed error breakdown]

## AI Research Findings

### Error Documentation Analysis
[Mistral's Microsoft documentation research]

### Code Context Analysis  
[DeepSeek's code analysis and context]

### Pattern Validation Results
[CodeGemma's pattern compliance check]

### Synthesis and Recommendations
[Gemma2's final synthesis and action plan]
```

---

## 📊 MONITORING & TROUBLESHOOTING

### Health Checks

#### 1. **Process Health**
```bash
# Check AIERS processes
ps aux | grep -E "(autonomous|BuildTools)" | grep -v grep

# Expected: Should show running processes
```

#### 2. **File System Health**
```bash
# Check input directory exists
ls -la /mnt/d/Projects/CSharp/Day_Trading_Platform_Dragon/AI_Codebase_Watchdog_System/input/

# Check output directory exists  
ls -la /mnt/d/Projects/CSharp/Day_Trading_Platform_Dragon/MarketAnalyzer/docs/error-booklets/
```

#### 3. **Configuration Health**
```bash
# Verify configuration file exists
cat /mnt/d/Projects/CSharp/Day_Trading_Platform_Dragon/AI_Codebase_Watchdog_System/config/watchdog.ini | grep -E "(BookletOutputDirectory|BuildOutputWatchDirectory)"
```

### Common Issues & Solutions

#### Issue: "AIERS Not Processing Files"
**Symptoms**: Files placed in input directory but no booklets generated
**Solution**:
```bash
# Check if AIERS is running
ps aux | grep autonomous_error_researcher

# If not running, restart:
cd /path/to/python/tools
nohup python3 autonomous_error_researcher.py &
```

#### Issue: "BookletBuilder Build Errors"
**Symptoms**: C# BookletBuilder won't compile
**Solution**:
```bash
# Restore missing DevTools files
cd /mnt/d/Projects/CSharp/Day_Trading_Platform_Dragon/MarketAnalyzer
git restore DevTools/

# Rebuild BookletBuilder
cd DevTools/BuildTools/src
dotnet restore
dotnet build
```

#### Issue: "No Booklets Generated"
**Symptoms**: AIERS running but no output booklets
**Troubleshooting**:
```bash
# Check log files
tail -f /AI_Codebase_Watchdog_System/logs/global-notifications.log

# Check Ollama is running
curl http://localhost:11434/api/tags

# Restart AIERS with verbose logging
```

#### Issue: "Configuration Problems"
**Symptoms**: Wrong paths or missing directories
**Solution**:
```bash
# Recreate missing directories
mkdir -p /mnt/d/Projects/CSharp/Day_Trading_Platform_Dragon/AI_Codebase_Watchdog_System/input
mkdir -p /mnt/d/Projects/CSharp/Day_Trading_Platform_Dragon/AI_Codebase_Watchdog_System/logs

# Verify configuration
grep -E "(Directory|Path)" /AI_Codebase_Watchdog_System/config/watchdog.ini
```

---

## 📁 FILE STRUCTURE REFERENCE

### Complete AIERS File Structure

```
Day_Trading_Platform_Dragon/
├── AI_Codebase_Watchdog_System/
│   ├── config/
│   │   ├── watchdog.ini                    # Main AIERS configuration
│   │   └── projects/
│   │       └── MarketAnalyzer.ini          # Project-specific config
│   ├── input/                              # WATCHED DIRECTORY for build files
│   ├── logs/
│   │   └── global-notifications.log        # AIERS operation logs
│   └── data/
│       └── watchdog.db                     # Processing database
│
├── MarketAnalyzer/
│   ├── DevTools/
│   │   ├── BuildTools/src/                 # C# BookletBuilder (PRIMARY)
│   │   │   ├── Program.cs                  # Main BookletBuilder entry point
│   │   │   ├── MarketAnalyzer.BuildTools.csproj
│   │   │   ├── Clients/                    # AI model clients
│   │   │   ├── Infrastructure/AI/          # AI service implementations
│   │   │   └── Domain/                     # Core domain logic
│   │   └── Foundation/                     # Shared foundation components
│   │
│   ├── docs/
│   │   └── error-booklets/                 # OUTPUT DIRECTORY for booklets
│   │       └── YYYY-MM-DD/                 # Daily booklet organization
│   │           ├── CS0117_ErrorName.md     # Generated booklets
│   │           └── CS0535_ErrorName.md
│   │
│   ├── tools/                              # Utility scripts
│   │   ├── monitor_booklet_generation.sh   # Monitoring script
│   │   ├── run_ai_error_resolution.sh      # Alternative runner
│   │   └── auto_build_and_research.sh      # Automated workflow
│   │
│   └── archive/
│       └── python_tools_deprecated_2025-07-11/
│           └── autonomous_error_researcher.py  # BACKUP Python system
```

### Key File Locations

| Component | Path | Purpose |
|-----------|------|---------|
| **Main Config** | `/AI_Codebase_Watchdog_System/config/watchdog.ini` | AIERS configuration |
| **Input Watch** | `/AI_Codebase_Watchdog_System/input/` | Drop build files here |
| **Booklet Output** | `/MarketAnalyzer/docs/error-booklets/YYYY-MM-DD/` | Generated booklets |
| **Primary AIERS** | `/MarketAnalyzer/DevTools/BuildTools/src/` | C# BookletBuilder |
| **Backup AIERS** | `/MarketAnalyzer/archive/python_tools_deprecated_2025-07-11/` | Python system |
| **Monitoring** | `/MarketAnalyzer/tools/monitor_booklet_generation.sh` | Health checks |
| **Logs** | `/AI_Codebase_Watchdog_System/logs/` | Operation logs |

---

## 🚑 RECOVERY PROCEDURES

### Complete System Recovery

#### 1. **If AIERS is Completely Broken**
```bash
# Step 1: Restore all DevTools files
cd /mnt/d/Projects/CSharp/Day_Trading_Platform_Dragon/MarketAnalyzer
git restore DevTools/

# Step 2: Rebuild BookletBuilder
cd DevTools/BuildTools/src
dotnet restore
dotnet build

# Step 3: Verify configuration
cat /AI_Codebase_Watchdog_System/config/watchdog.ini | grep Directory

# Step 4: Recreate directories if missing
mkdir -p /AI_Codebase_Watchdog_System/input
mkdir -p /AI_Codebase_Watchdog_System/logs

# Step 5: Start AIERS
nohup dotnet run &

# Step 6: Verify running
ps aux | grep "dotnet.*BuildTools"
```

#### 2. **If Configuration is Lost**
```bash
# Restore configuration template
cp /AI_Codebase_Watchdog_System/config/templates/watchdog.ini.template \
   /AI_Codebase_Watchdog_System/config/watchdog.ini

# Edit critical paths
nano /AI_Codebase_Watchdog_System/config/watchdog.ini
# Set BookletOutputDirectory and BuildOutputWatchDirectory
```

#### 3. **Emergency Fallback to Python System**
```bash
# If C# system fails, use Python backup
cd /MarketAnalyzer/archive/python_tools_deprecated_2025-07-11
nohup python3 autonomous_error_researcher.py > aiers_backup.log 2>&1 &

# Monitor Python system
tail -f aiers_backup.log
```

---

## ✅ VERIFICATION CHECKLIST

### Before Starting Any Development Session

- [ ] **AIERS Process Running**: `ps aux | grep autonomous_error_researcher`
- [ ] **Input Directory Exists**: `/AI_Codebase_Watchdog_System/input/`
- [ ] **Output Directory Accessible**: `/MarketAnalyzer/docs/error-booklets/`
- [ ] **Configuration Valid**: Check watchdog.ini paths
- [ ] **Ollama Running**: `curl http://localhost:11434/api/tags`
- [ ] **Recent Booklets**: Check for recent booklet generation

### After Submitting Errors to AIERS

- [ ] **File Submitted**: Build output file in input directory
- [ ] **Processing Started**: Check logs for activity
- [ ] **Booklets Generated**: New .md files in output directory
- [ ] **Booklets Complete**: Full booklets with all AI sections

### Before Implementing Any Fixes

- [ ] **Read All Booklets**: Review all generated research
- [ ] **Understand Root Cause**: AI analysis comprehended
- [ ] **Follow AI Guidance**: Use booklet recommendations
- [ ] **Document Actions**: Journal what was implemented

---

## 🎯 SUCCESS CRITERIA

AIERS is working correctly when:

1. ✅ **Autonomous Operation**: Runs continuously without intervention
2. ✅ **File Detection**: Automatically detects new build output files
3. ✅ **AI Processing**: Processes through all 4 AI models
4. ✅ **Booklet Generation**: Creates comprehensive research booklets
5. ✅ **Consistent Quality**: Each booklet contains all required sections
6. ✅ **Agent Compliance**: All agents follow AIERS workflow

---

## 🚨 CRITICAL REMINDERS FOR ALL AGENTS

1. **AIERS MUST BE RUNNING** before any development work
2. **NEVER MANUALLY ANALYZE ERROR CODES** - always use AIERS
3. **ONLY WORK WITH BOOKLETS** generated by the AI pipeline
4. **MONITOR PROCESSING** to ensure AIERS is functioning
5. **DOCUMENT EVERYTHING** for future agent reference
6. **FOLLOW THE WORKFLOW** exactly as described

**VIOLATION OF THESE PRINCIPLES WILL BREAK THE ENTIRE ERROR RESOLUTION SYSTEM!**

---

**End of Documentation**

*Generated by tradingagent | Version 2.0 | 2025-07-12*
*For questions or issues, refer to agent journals or system logs*